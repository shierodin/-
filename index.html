<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>파이썬 게임 포팅</title>
    <style>
        body { background-color: #0c0c0c; color: #00ff00; font-family: 'Courier New', Courier, monospace; padding: 20px; }
        #terminal { width: 100%; height: 400px; overflow-y: auto; border: 1px solid #333; padding: 10px; margin-bottom: 10px; white-space: pre-wrap; }
        #input-area { display: flex; }
        #user-input { background: transparent; border: none; color: #00ff00; outline: none; width: 100%; font-size: 16px; }
        .prompt { margin-right: 10px; }
    </style>
</head>
<body>

<div id="terminal"></div>
<div id="input-area">
    <span class="prompt">>>></span>
    <input type="text" id="user-input" autofocus>
</div>

<script>
    // 게임 변수 (파이썬 코드 로직 그대로 유지)
    let mm = 1000;
    let se = 1;
    let dd = 1;
    let q = 0;
    let w = 0;
    let e = 0;
    
    let gameState = "MAIN"; // MAIN, HIRE, HIRE_DETAIL, UPGRADE, WORK
    let subTarget = ""; // 1, 2, 3

    const terminal = document.getElementById('terminal');
    const input = document.getElementById('user-input');

    function print(text) {
        const line = document.createElement('div');
        line.textContent = text;
        terminal.appendChild(line);
        terminal.scrollTop = terminal.scrollHeight;
    }

    // 파이썬의 threading 기능을 setInterval로 구현
    function startThreads() {
        // noo1 (5초)
        setInterval(() => { if(q === 1) mm += se * 500; }, 5000);
        // noo2 (3초)
        setInterval(() => { if(w === 1) mm += se * 6500; }, 3000);
        // noo3 (2초)
        setInterval(() => { if(e === 1) mm += se * 9000; }, 2000);
    }

    function showMainMenu() {
        print("");
        print(`고용 | 업그레이드 | ${Math.floor(mm)}원/10,000,000원 | 돈벌기(선택해서 쓰세요)`);
    }

    input.addEventListener('keypress', function (event) {
        if (event.key === 'Enter') {
            const val = input.value.trim();
            print(">>> " + val);
            input.value = '';
            handleInput(val);
        }
    });

    function handleInput(n) {
        // --- 메인 메뉴 상태 ---
        if (gameState === "MAIN") {
            if (n.includes('고용')) {
                print("1,2,3(선택)");
                gameState = "HIRE";
            } else if (n.includes('업그레이드')) {
                gameState = "UPGRADE";
                print(`돈 효율 2% 상승 | 비용 : ${dd * 500}`);
                print("(사기,나가기)");
            } else if (n.includes('돈벌기')) {
                print(`돈 ${se * 500} 벌림`);
                print("(벌기, 나가기)");
                gameState = "WORK";
            }
        } 
        
        // --- 고용 메뉴 상태 ---
        else if (gameState === "HIRE") {
            if (n === '1') {
                print("일반 알바생 | 5초당 500원 | 비용 : 6000원");
                print("(사기,나가기)");
                subTarget = "1";
                gameState = "HIRE_DETAIL";
            } else if (n === '2') {
                print("고급 알바생 | 3초당 6500원 | 비용 : 20000원");
                print("(사기,나가기)");
                subTarget = "2";
                gameState = "HIRE_DETAIL";
            } else if (n === '3') {
                print("직원 | 2초당 9000원 | 비용 : 100,000원");
                print("(사기,나가기)");
                subTarget = "3";
                gameState = "HIRE_DETAIL";
            } else {
                gameState = "MAIN";
                showMainMenu();
            }
        }

        // --- 고용 상세 구매 상태 (파이썬 버그/로직 그대로 반영) ---
        else if (gameState === "HIRE_DETAIL") {
            if (n.includes('사기')) {
                if (subTarget === "1") {
                    if (mm < 4000) print("돈이 부족합니다"); // 파이썬 원본의 4000원 체크 유지
                    else if (mm >= 4000) {
                        if (q === 1) print("이미 구매 됨");
                        else { print("구매 성공"); mm -= 6000; q = 1; }
                    }
                } else if (subTarget === "2") {
                    if (mm < 12000) print("돈이 부족합니다"); // 파이썬 원본의 12000원 체크 유지
                    else if (mm >= 12000) {
                        if (e === 1) print("이미 구매 됨"); // 원본의 'e==1' 버그 유지
                        else if (w === 0) { print("구매 성공"); mm -= 20000; w = 1; }
                    }
                } else if (subTarget === "3") {
                    if (mm < 100000) print("돈이 부족합니다");
                    else if (mm >= 100000) {
                        if (e === 1) print("이미 구매 됨");
                        else if (e === 0) { print("구매 성공"); mm -= 100000; e = 1; }
                    }
                }
            }
            gameState = "MAIN";
            showMainMenu();
        }

        // --- 업그레이드 상태 ---
        else if (gameState === "UPGRADE") {
            if (n.includes('사기')) {
                if (mm < dd * 500) {
                    print("돈이 부족합니다");
                } else {
                    print("구매 성공");
                    mm -= dd * 500;
                    se += 1.02;
                    dd += 1;
                    print(`돈 효율 2% 상승 | 비용 : ${dd * 500}`);
                    print("(사기,나가기)");
                }
            } else if (n.includes('나가기')) {
                gameState = "MAIN";
                showMainMenu();
            }
        }

        // --- 돈벌기 상태 ---
        else if (gameState === "WORK") {
            if (n.includes('벌기') || n.includes('돈')) {
                mm += se * 500;
                print(`돈 벌림 | 현재 돈:${Math.floor(mm)}`);
                print("돈, 나가기");
            } else {
                gameState = "MAIN";
                showMainMenu();
            }
        }
    }

    // 게임 시작
    startThreads();
    showMainMenu();
</script>

</body>
</html>
